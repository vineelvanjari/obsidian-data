/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var u=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var E=(n,t)=>{for(var e in t)u(n,e,{get:t[e],enumerable:!0})},D=(n,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of V(t))!T.call(n,i)&&i!==e&&u(n,i,{get:()=>t[i],enumerable:!(s=y(t,i))||s.enumerable});return n};var v=n=>D(u({},"__esModule",{value:!0}),n);var N={};E(N,{ChecklistResetSettingTab:()=>f,default:()=>g});module.exports=v(N);var o=require("obsidian");var x=require("obsidian");function w(n,t){return n.replaceAll(t,"")}var O=" \\[[^ ]\\])",b=" \\[ \\])",M="^[ 	]*(> )*\\d*",F=["-","*","+","."];function I(n){if(!n||n==="")return;let t=n.match(new RegExp("^/(.*?)/([gimy]*)$"));return t?new RegExp(t[1],t[2]):n}function p(n,{deleteTextOnReset:t},e="uncheck"){let s=e==="check"?"[x]":"[ ]",i=e==="check"?b:O,a=I(t);return n.split(`
`).map(c=>{let h=F.find(l=>{if(new RegExp(`${M}(\\${l}${i}`,"g").test(c))return l});if(h){let l=c;return a&&e==="uncheck"&&(l=w(c,a)),l.replace(new RegExp(`(\\${h}${i}`,"g"),`${h} ${s}`)}return c}).join(`
`)}async function m(n,t,e,s,i){let a=t.getViewData(),c=JSON.parse(a),h=((c==null?void 0:c.nodes)||[]).filter(r=>i?i.includes(r.id):!0);for(let r of h)if(r.type==="text"&&typeof r.text=="string"&&(r.text=p(r.text,e,s)),r.type==="file"){let d=n.vault.getAbstractFileByPath(r.file);if(d&&d instanceof x.TFile){let A=await n.vault.read(d),C=p(A,e,s);await n.vault.modify(d,C)}}let l=JSON.stringify(c,null,2);t.setViewData(l,!1),t.save()}function k(n,t,e,s){let i=s?n.editor.getRange(s.head,s.anchor):n.getViewData(),a=p(i,t,e);s?n.editor.replaceRange(a,s.head,s.anchor):n.setViewData(a,!1),n.save()}var $={deleteTextOnReset:""};function R(n,t,e,s){t.file.extension==="canvas"?m(n,t,e,s):k(t,e,s)}function S(n,t=!1){let e=n.workspace.getActiveViewOfType(o.TextFileView),s=(e==null?void 0:e.file.extension)==="canvas"||e instanceof o.MarkdownView;return s&&t&&e instanceof o.MarkdownView?e.currentMode.type==="source":s}var g=class extends o.Plugin{async loadSettings(){this.settings={...$,...await this.loadData()}}async saveSettings(){await this.saveData(this.settings)}async onload(){await this.loadSettings(),this.addSettingTab(new f(this.app,this)),this.addCommand({id:"checklist-reset",name:"Reset checklists",checkCallback:t=>{if(t)return S(this.app);let e=this.app.workspace.getActiveViewOfType(o.TextFileView);e&&R(this.app,e,this.settings,"uncheck")}}),this.addCommand({id:"checklist-check-all",name:"Check all",checkCallback:t=>{if(t)return S(this.app);let e=this.app.workspace.getActiveViewOfType(o.TextFileView);e&&R(this.app,e,this.settings,"check")}}),this.addCommand({id:"checklist-reset-selected",name:"Reset selected checklists",checkCallback:t=>{if(t)return S(this.app,!0);let e=this.app.workspace.getActiveViewOfType(o.TextFileView);if((e==null?void 0:e.file.extension)==="canvas"){let i=[...e.canvas.selection].map(a=>a.id);m(this.app,e,this.settings,"uncheck",i)}else if(e instanceof o.MarkdownView){let s=e.editor.listSelections();s.length>0&&k(e,this.settings,"uncheck",s[0])}}})}},f=class extends o.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){let{containerEl:t}=this;t.empty(),new o.Setting(t).setName("Delete text on reset").setDesc("A regex or string. When resetting a checklist item any text matching this will be deleted.").addText(e=>e.setPlaceholder("/ \u2705 \\d{4}-\\d{2}-\\d{2}.*/g").setValue(this.plugin.settings.deleteTextOnReset).onChange(async s=>{this.plugin.settings.deleteTextOnReset=s,await this.plugin.saveSettings()}))}};

/* nosourcemap */